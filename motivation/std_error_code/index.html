<!DOCTYPE html>
<html lang="en" class="js csstransforms3d">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <meta name="generator" content="Hugo 0.32.4" />
    <meta name="description" content="Overview of std::error_code">


    <title>std::error_code :: Outcome documentation</title>
    <link rel="shortcut icon" href="/outcome/images/favicon.png" type="image/x-icon" />
    <link href="/outcome/css/nucleus.css" rel="stylesheet">
    <link href="/outcome/css/font-awesome.min.css" rel="stylesheet">
    <link href="/outcome/css/hybrid.css" rel="stylesheet">
    <link href="/outcome/css/featherlight.min.css" rel="stylesheet">
    <link href="/outcome/css/horsey.css" rel="stylesheet">
    
    <link href="/outcome/css/theme.css" rel="stylesheet">
    
    
    <link rel="stylesheet" href="/outcome/css/bootstrap.min.css">
    <script src="/outcome/js/jquery-2.x.min.js"></script>
    <style type="text/css">
      :root #header + #content > #left > #rlblock_left {
        display:none !important;
      }
    </style>

    

    <link href="/outcome/css/local.css" rel="stylesheet">

  </head>
  <body class="" data-url="/outcome/motivation/std_error_code/">
    <nav id="sidebar" class=""><div class="highlightable">
  <div id="header-wrapper">
    <div id="header"> 
	<p>Outcome 2.0 library documentation</p>
 


    </div><div class="searchbox">
    <label for="search-by"><i class="fa fa-search"></i></label>
    <input data-search-input id="search-by" type="text" placeholder="Search...">
    <span data-search-clear=""><i class="fa fa-close"></i></span>
</div>
<script type="text/javascript" src="/outcome/js/lunr.min.js"></script>
<script type="text/javascript" src="/outcome/js/horsey.js"></script>
<script type="text/javascript">
    var baseurl = "https:\/\/ned14.github.io\/outcome\/";
</script>
<script type="text/javascript" src="/outcome/js/search.js"></script>

  </div>


    <ul class="topics">
            <li data-nav-id="/outcome/" class="dd-item">
            <a href="/outcome/"><i class="fa fa-fw fa-home"></i></a>
            </li>
    <li data-nav-id="/outcome/requirements/" class="dd-item">
      <a href="/outcome/requirements/">
        <span>Prerequisites</span>
      </a>
    </li>
    <li data-nav-id="/outcome/build/" class="dd-item">
      <a href="/outcome/build/">
        <span>Build and install</span>
      </a>
    </li>
    <li data-nav-id="/outcome/use-matrix/" class="dd-item">
      <a href="/outcome/use-matrix/">
        <span>Decision matrix</span>
      </a>
    </li>
    <li data-nav-id="/outcome/motivation/" class="dd-item parent">
      <a href="/outcome/motivation/">
        <span>Motivation</span>
            <i class="fa fa-angle-down fa-lg category-icon"></i>
      </a>
        <ul>
      <li data-nav-id="/outcome/motivation/exceptions/" class="dd-item">
        <a href="/outcome/motivation/exceptions/">
          <span>Exceptions</span>
        </a>
    </li>
      <li data-nav-id="/outcome/motivation/errno/" class="dd-item">
        <a href="/outcome/motivation/errno/">
          <span>errno</span>
        </a>
    </li>
      <li data-nav-id="/outcome/motivation/error_codes/" class="dd-item">
        <a href="/outcome/motivation/error_codes/">
          <span>Error codes</span>
        </a>
    </li>
      <li data-nav-id="/outcome/motivation/std_error_code/" class="dd-item active">
        <a href="/outcome/motivation/std_error_code/">
          <span>std::error_code</span>
        </a>
    </li>
      <li data-nav-id="/outcome/motivation/plug_error_code/" class="dd-item">
        <a href="/outcome/motivation/plug_error_code/">
          <span>Plugging a library into std::error_code</span>
        </a>
    </li>
        </ul>
    </li>
    <li data-nav-id="/outcome/tutorial/" class="dd-item">
      <a href="/outcome/tutorial/">
        <span>Tutorial</span><i class="fa fa-angle-right fa-lg category-icon"></i>
      </a>
        <ul>
        </ul>
    </li>
    <li data-nav-id="/outcome/reference/" class="dd-item">
      <a href="/outcome/reference/">
        <span>API reference</span><i class="fa fa-angle-right fa-lg category-icon"></i>
      </a>
        <ul>
      <li data-nav-id="/outcome/reference/outcome/" class="dd-item">
        <a href="/outcome/reference/outcome/">
          <span>outcome&lt;R, S, P&gt;</span>
        </a>
    </li>
      <li data-nav-id="/outcome/reference/result/" class="dd-item">
        <a href="/outcome/reference/result/">
          <span>result&lt;R, S&gt;</span>
        </a>
    </li>
      <li data-nav-id="/outcome/reference/try/" class="dd-item">
        <a href="/outcome/reference/try/">
          <span>Try operations</span>
        </a>
    </li>
      <li data-nav-id="/outcome/reference/success_failure/" class="dd-item">
        <a href="/outcome/reference/success_failure/">
          <span>Success/Failure</span>
        </a>
    </li>
      <li data-nav-id="/outcome/reference/utils/" class="dd-item">
        <a href="/outcome/reference/utils/">
          <span>Utilities</span>
        </a>
    </li>
      <li data-nav-id="/outcome/reference/convert/" class="dd-item">
        <a href="/outcome/reference/convert/">
          <span>Interoperation</span>
        </a>
    </li>
      <li data-nav-id="/outcome/reference/bad_access/" class="dd-item">
        <a href="/outcome/reference/bad_access/">
          <span>Exceptions</span>
        </a>
    </li>
      <li data-nav-id="/outcome/reference/iostream_support/" class="dd-item">
        <a href="/outcome/reference/iostream_support/">
          <span>iostream support</span>
        </a>
    </li>
      <li data-nav-id="/outcome/reference/result_c/" class="dd-item">
        <a href="/outcome/reference/result_c/">
          <span>C API</span>
        </a>
    </li>
    <li data-nav-id="/outcome/reference/policies/" class="dd-item">
      <a href="/outcome/reference/policies/">
        <span>Policies</span><i class="fa fa-angle-right fa-lg category-icon"></i>
      </a>
        <ul>
      <li data-nav-id="/outcome/reference/policies/all_narrow/" class="dd-item">
        <a href="/outcome/reference/policies/all_narrow/">
          <span>All narrow (hard UB)</span>
        </a>
    </li>
      <li data-nav-id="/outcome/reference/policies/outcome_error_code_throw_as_system_error/" class="dd-item">
        <a href="/outcome/reference/policies/outcome_error_code_throw_as_system_error/">
          <span>error_code throw as system_error (Outcome)</span>
        </a>
    </li>
      <li data-nav-id="/outcome/reference/policies/result_error_code_throw_as_system_error/" class="dd-item">
        <a href="/outcome/reference/policies/result_error_code_throw_as_system_error/">
          <span>error_code throw as system_error (Result)</span>
        </a>
    </li>
      <li data-nav-id="/outcome/reference/policies/outcome_exception_ptr_rethrow/" class="dd-item">
        <a href="/outcome/reference/policies/outcome_exception_ptr_rethrow/">
          <span>exception_ptr rethrow (Outcome)</span>
        </a>
    </li>
      <li data-nav-id="/outcome/reference/policies/result_exception_ptr_rethrow/" class="dd-item">
        <a href="/outcome/reference/policies/result_exception_ptr_rethrow/">
          <span>exception_ptr rethrow (Result)</span>
        </a>
    </li>
      <li data-nav-id="/outcome/reference/policies/terminate/" class="dd-item">
        <a href="/outcome/reference/policies/terminate/">
          <span>Termimate</span>
        </a>
    </li>
      <li data-nav-id="/outcome/reference/policies/throw_bad_result_access/" class="dd-item">
        <a href="/outcome/reference/policies/throw_bad_result_access/">
          <span>Throw bad_result_access</span>
        </a>
    </li>
        </ul>
    </li>
        </ul>
    </li>
    <li data-nav-id="/outcome/faq/" class="dd-item">
      <a href="/outcome/faq/">
        <span>Frequently asked questions</span>
      </a>
    </li>
    <li data-nav-id="/outcome/videos/" class="dd-item">
      <a href="/outcome/videos/">
        <span>Videos</span>
      </a>
    </li>
    <li data-nav-id="/outcome/changelog/" class="dd-item">
      <a href="/outcome/changelog/">
        <span>Changelog</span>
      </a>
    </li>
    <li data-nav-id="/outcome/history/" class="dd-item">
      <a href="/outcome/history/">
        <span>History</span>
      </a>
    </li>
        <section id="shortcuts">
                <li class="" role=""><h3>More</h3><a href="https://github.com/ned14/outcome" target="_blank" rel="noopener"><i class='fa fa-github'></i> Outcome 2.0 github repo</a></li>
                <li class="" role=""><a href="/outcome/credits" target="_blank" rel="noopener"><i class='fa fa-bullhorn'></i> Acknowledgements</a></li>
        </section>
    </ul>


    <section id="footer"><center>

<a class="github-button" href="https://dedi4.nedprod.com/static/files/outcome-v2.0-source-latest.tar.xz" data-icon="octicon-cloud-download" aria-label="Download Outcome">Download</a>


<a class="github-button" href="https://github.com/ned14/outcome" data-icon="octicon-star" data-show-count="false" aria-label="Star Outcome on GitHub">Star</a>


<a class="github-button" href="https://github.com/ned14/outcome/fork" data-icon="octicon-repo-forked" data-show-count="true" aria-label="Fork Outcome on GitHub">Fork</a>

</center>

<script async defer src="https://buttons.github.io/buttons.js"></script>
    </section>
  </div>
</nav>



        <section id="body">
        <div id="overlay"></div>
        <div class="padding highlightable">
        
          <div id="top-bar">
            
              
              
              
            <div id="top-github-link">
              <a class="github-link" href="https://github.com/ned14/outcome/edit/develop/doc/src/content/motivation/std_error_code.md" target="blank">
                <i class="fa fa-code-fork"></i>
                Edit page
              </a>
            </div><div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
                <span id="sidebar-toggle-span">
                  <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
                    <i class="fa fa-bars"></i>
                  </a>
                </span>
                <span id="toc-menu"><i class="fa fa-list-alt"></i></span>
                <span class="links">
                







 <a href='/outcome/'>Home</a> > <a href='/outcome/motivation/'>Motivation</a> > std::error_code

 

 

   
                </span>
            </div>
            <div class="progress">
    <div class="wrapper">
<nav id="TableOfContents">
<ul>
<li>
<ul>
<li><a href="#std-error-code"><code>std::error_code</code></a></li>
</ul></li>
</ul>
</nav>
    </div>
</div>

          </div>
        
        
        <div id="body-inner">
          
            <h1>std::error_code</h1>
          






<h2 id="std-error-code"><code>std::error_code</code></h2>

<p>Type <code>std::error_code</code> has been designed to be sufficiently small and trivial
to be cheaply passed around, and at the same time be able to store sufficient
information to represent any error situation from any library/sub-system in the
world without a clash. Its representation is basically:</p>
<div class="highlight"><pre class="chroma"><code class="language-c++" data-lang="c++"><span class="k">class</span> <span class="nc">error_code</span>
<span class="p">{</span>
  <span class="n">error_category</span><span class="o">*</span> <span class="n">domain</span><span class="p">;</span> <span class="c1">// domain from which the error originates
</span><span class="c1"></span>  <span class="kt">int</span>             <span class="n">value</span><span class="p">;</span>  <span class="c1">// numeric value of error within the domain
</span><span class="c1"></span><span class="p">};</span></code></pre></div>
<p>Here, <code>domain</code> indicates the library from which the error originates. It is a
pointer to a global object representing a given library/domain. Different
libraries will be represented by different pointers to different globals.
Each domain is expected to be represented by a global object derived from
<code>std::error_category</code>. The uniqueness of the domain pointer value is guaranteed
by the uniqueness of addresses of different global objects.</p>

<p>Now, <code>value</code> represents a numeric value of a particular error situation within
the domain. Thus, different domains can use the same numeric value <code>1</code> to
indicate different error situations, but two <code>std::error_code</code> objects will be
different because the pointers representing domains will be different.</p>

<p><code>std::error_code</code> comes with additional tools: a facility for defining custom
domains with their set of error codes, and a facility for building predicates
that allow classifying errors.</p>

<p>Once created and passed around (either inside a thrown exception or returned from functions by value) there is never a need to change the value of <code>error_code</code>
object at any level. But at different levels one can use different predicates
for classifying error situations appropriately to the program layer.</p>

<p>When a new library needs to represent its own set of error situations in an
<code>error_code</code> it first has to declare the list of numeric value as an enumeration:</p>
<div class="highlight"><pre class="chroma"><code class="language-c++" data-lang="c++"><span class="k">enum</span> <span class="k">class</span> <span class="nc">ConvertErrc</span>
<span class="p">{</span>
  <span class="n">StringTooLong</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="c1">// 0 should not represent an error
</span><span class="c1"></span>  <span class="n">EmptyString</span>   <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
  <span class="n">IllegalChar</span>   <span class="o">=</span> <span class="mi">3</span><span class="p">,</span>
<span class="p">};</span></code></pre></div>
<p>Then it has to put some boiler-plate code to plug the new enumeration into the
<code>std::error_code</code> system. Then, it can use the enum as an <code>error_code</code>:</p>
<div class="highlight"><pre class="chroma"><code class="language-c++" data-lang="c++"><span class="n">std</span><span class="o">::</span><span class="n">error_code</span> <span class="n">ec</span> <span class="o">=</span> <span class="n">ConvertErrc</span><span class="o">::</span><span class="n">EmptyString</span><span class="p">;</span>
<span class="n">assert</span><span class="p">(</span><span class="n">ec</span> <span class="o">==</span> <span class="n">ConvertErrc</span><span class="o">::</span><span class="n">EmptyString</span><span class="p">);</span></code></pre></div>
<p>Member <code>value</code> is mapped directly from the numeric value in the enumeration, and
member <code>domain</code> is mapped from the type of the enumeration. Thus, this is a form
of type erasure, but one that does allow type <code>std::error_code</code> to be trivial
and standard-layout.</p>


<footer class=" footline" >
	
</footer>




        

      </div>
    </div>

    
 
    

    <div id="navigation">
        <a class="nav nav-prev" href="/outcome/motivation/error_codes/" title="Error codes"> <i class="fa fa-chevron-left"></i></a>
        <a class="nav nav-next" href="/outcome/motivation/plug_error_code/" title="Plugging a library into std::error_code" style="margin-right: 0px;"><i class="fa fa-chevron-right"></i></a>
    </div>

    </section>
    <div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
      <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
    </div>    

    <script src="/outcome/js/clipboard.min.js"></script>
<script src="/outcome/js/featherlight.min.js"></script>
<script src="/outcome/js/html5shiv-printshiv.min.js"></script>


<script src="/outcome/js/modernizr.custom.71422.js"></script>
<script src="/outcome/js/learn.js"></script>
<script src="/outcome/js/hugo-learn.js"></script>


<link href="/outcome/mermaid/mermaid.css" type="text/css" rel="stylesheet"/>
<script src="/outcome/mermaid/mermaid.js"></script>
<script>mermaid.initialize({startOnLoad:true});</script>
    

  </body>
</html>

